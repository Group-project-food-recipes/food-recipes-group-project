<!DOCTYPE html>
<html lang="en" >

<head>
  	<meta charset="UTF-8">
  	<title>Login</title>
  	<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:600'>
	<link rel="stylesheet" href="css/style.css" type="text/css">
	<meta name="google-signin-client_id" content="22604769740-maf2eq1ma41rfaj5i8id6vbb5nulqt8k.apps.googleusercontent.com">
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
</head>

<body>
  <div class="login-wrap">
		<div class="login-html">
			<input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">Sign In</label>
			<input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">Sign Up</label>
			<div class="login-form">
				<div class="sign-in-htm">
					<form id="login"  method="POST">
						<div class="group">
							<label for="user" class="label">email</label>
							<input id="email" type="text" class="input">
						</div>
						<div class="group">
							<label for="pass" class="label">Password</label>
							<input id="password" type="password" class="input" data-type="password">
						</div>
						<div class="group">
							<input id="check" type="checkbox" class="check" checked>
							<label for="check"><span class="icon"></span> Keep me Signed in</label>
						</div>
						<div class="group">
							<input type="submit" class="button" value="Sign In">
						</div>
						<div class="hr"></div>
						<div class="foot-lnk">
							<div class="g-signin2" data-onsuccess="onSignIn"> </div>
						</div>
					</form>
				</div>
				<!-- <div class="sign-up-htm">
					<div class="group">
						<label for="user" class="label">Email</label>
						<input id="user" type="email" class="input">
					</div>
					<div class="group">
						<label for="pass" class="label">Password</label>
						<input id="pass" type="password" class="input" data-type="password">
					</div>
					<div class="group">
							<label for="pass" class="label">First Name</label>
							<input id="pass" type="password" class="input">
					</div>
					<div class="group">
							<label for="pass" class="label">Last Name</label>
							<input id="pass" type="text" class="input" >
					</div>
					<div class="group">
						<input type="submit" class="button" value="Sign Up">
					</div>
					<div class="hr"></div>
					<div class="foot-lnk">
						<label for="tab-1">Already Member?</a>
					</div>
				</div> -->
			</div>
		</div>
	</div>
	<script>
		$("#login").on("submit", function(event){
            event.preventDefault();
            var data ={
                email : $('#email').val(),
                password : $('#password').val()
            }
            $.ajax({
                type: 'POST',
                url: 'http://localhost:3000/login/',
                dataType: 'json',
                data: data
            })
            .done(function(dataLogin){
				console.log(dataLogin)
				localStorage.setItem('token', dataLogin.token)
				alert("berhasil login")
				window.location.href = '/index.html';
            })
            .fail(function(error){
                console.log(error)
            })
		})
		
        function onSignIn(googleUser) {
            var id_token = googleUser.getAuthResponse().id_token;
            statusChangeCallback(id_token)
        }

        function statusChangeCallback(token){
            $.ajax({
                method: "POST",
                url: 'http://localhost:3000/googlesign',
                data: {token: token}
            })
            .done(function(msg) {
            })
            .fail(function(error){
                console.log(error)
            })
        }
    </script>
</body>

</html>
